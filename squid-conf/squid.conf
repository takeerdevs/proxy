http_port 3128
visible_hostname my-squid

# Define ACLs first
acl SSL_ports port 443
acl Safe_ports port 80
acl Safe_ports port 21
acl Safe_ports port 443
acl Safe_ports port 70
acl Safe_ports port 210
acl Safe_ports port 1025-65535
acl Safe_ports port 280
acl Safe_ports port 488
acl Safe_ports port 591
acl Safe_ports port 777
acl CONNECT method CONNECT

# Deny requests to unsafe ports
http_access deny !Safe_ports

# Deny CONNECT to non-SSL ports
http_access deny CONNECT !SSL_ports

# Allow all clients (for testing purposes)
http_access allow all

# Default deny (should never be reached with allow all above)
http_access deny all

cache_mem 128 MB
cache_dir ufs /var/spool/squid 100 16 256
refresh_pattern . 0 20% 4320
access_log /var/log/squid/access.log squid
