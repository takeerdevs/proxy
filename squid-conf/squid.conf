http_port 3128
visible_hostname my-squid

# Allow all IPs for testing
acl all src all

# Common port ACLs
acl SSL_ports port 443
acl Safe_ports port 80
acl Safe_ports port 21
acl Safe_ports port 443
acl CONNECT method CONNECT

# Allow HTTPS CONNECT explicitly first
http_access allow CONNECT SSL_ports
# Then allow all other traffic
http_access allow all
# Finally, block everything else
http_access deny all

cache_mem 128 MB
cache_dir ufs /var/spool/squid 100 16 256
refresh_pattern . 0 20% 4320
access_log /var/log/squid/access.log squid
